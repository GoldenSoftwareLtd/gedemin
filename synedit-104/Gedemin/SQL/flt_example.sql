
/*

  Copyright (c) 2000 by Golden Software of Belarus

  Script

    filter.sql

  Abstract

    An Interbase script for "universal" filter.

  Author

    Andrey Shadevsky (26.06.00)

  Revisions history

    Initial  26.06.00  JKL    Initial version

  Status 
    
    Draft

*/

/****************************************************/
/****************************************************/
/**                                                **/
/**   Copyright (c) 2000 by                        **/
/**   Golden Software of Belarus                   **/
/**                                                **/
/****************************************************/
/****************************************************/

CREATE TABLE TST_MAINTABLE (
    ID DINTKEY,
    NAME DNAME,
    ONETOSETKEY dforeignkey,
    INTEGERFIELD INTEGER,
    STRINGFIELD VARCHAR(20),
    DOUBLEFIELD DOUBLE PRECISION,
    DATEFIELD DATE,
    CHARBLOB BLOB SUB_TYPE 1 SEGMENT SIZE 1024,
    TIMEFIELD TIME,
    TIMESTAMPFIELD TIMESTAMP,
    RESERVED DINTEGER);

COMMIT;

ALTER TABLE TST_MAINTABLE ADD CONSTRAINT TST_PK_MAINTABLE PRIMARY KEY (ID);

COMMIT;

CREATE TABLE TST_SET_TO_ONE (
    ID DINTKEY,
    MAINTABLEKEY dforeignkey,
    NAME DNAME,
    INTEGERFIELD INTEGER,
    STRINGFIELD VARCHAR(20),
    DOUBLEFIELD DOUBLE PRECISION,
    DATEFIELD DATE,
    CHARBLOB BLOB SUB_TYPE 1 SEGMENT SIZE 1024,
    TIMEFIELD TIME,
    TIMESTAMPFIELD TIMESTAMP,
    RESERVED DINTEGER);

COMMIT;

ALTER TABLE TST_SET_TO_ONE ADD CONSTRAINT TST_PK_SET_TO_ONE PRIMARY KEY (ID);

ALTER TABLE TST_SET_TO_ONE ADD CONSTRAINT TST_FK_SET_TO_ONE_maintablekey
  FOREIGN KEY (maintablekey) REFERENCES tst_maintable(id)
  ON UPDATE CASCADE;

COMMIT;

CREATE TABLE TST_SET_TO_SET (
    ID DINTKEY,
    NAME DNAME,
    INTEGERFIELD INTEGER,
    STRINGFIELD VARCHAR(20) character set WIN1251 collate WIN1251,
    DOUBLEFIELD DOUBLE PRECISION,
    DATEFIELD DATE,
    CHARBLOB BLOB sub_type 1 segment size 1024,
    TIMEFIELD TIME,
    TIMESTAMPFIELD TIMESTAMP,
    RESERVED DINTEGER);

COMMIT;

ALTER TABLE TST_SET_TO_SET ADD CONSTRAINT TST_PK_SET_TO_SET PRIMARY KEY (id);

COMMIT;

CREATE TABLE TST_SETLINK(
    MAINTABLEKEY DINTKEY,
    SETTOSETKEY DINTKEY);

COMMIT;

ALTER TABLE tst_setlink ADD CONSTRAINT TST_PK_setlink PRIMARY KEY (MAINTABLEKEY, SETTOSETKEY); 


ALTER TABLE tst_setlink ADD CONSTRAINT tst_fk_setlink_mtkey
  FOREIGN KEY (maintablekey) REFERENCES tst_maintable(id)
  ON UPDATE CASCADE;

ALTER TABLE tst_setlink ADD CONSTRAINT tst_fk_setlink_stskey
  FOREIGN KEY (settosetkey) REFERENCES tst_set_to_set(id)
  ON UPDATE CASCADE;

COMMIT;

CREATE TABLE TST_ONE_TO_SET (
    ID DINTKEY,
    NAME DNAME,
    INTEGERFIELD INTEGER,
    STRINGFIELD VARCHAR(20) character set WIN1251 collate WIN1251,
    DOUBLEFIELD DOUBLE PRECISION,
    DATEFIELD DATE,
    CHARBLOB BLOB sub_type 1 segment size 1024,
    TIMEFIELD TIME,
    TIMESTAMPFIELD TIMESTAMP,
    RESERVED DINTEGER);

COMMIT;

ALTER TABLE TST_ONE_TO_SET ADD CONSTRAINT TST_PK_ONE_TO_SET PRIMARY KEY (id);

ALTER TABLE tst_maintable ADD CONSTRAINT tst_fk_maintable_oskey
  FOREIGN KEY (onetosetkey) REFERENCES tst_one_to_set(id)
  ON UPDATE CASCADE;

COMMIT;



INSERT INTO TST_ONE_TO_SET
  (ID,NAME,INTEGERFIELD,STRINGFIELD,DOUBLEFIELD,DATEFIELD,TIMEFIELD,TIMESTAMPFIELD,RESERVED)
VALUES
  (300,'Name 300',123,'JHGHJG',1.35,'12.12.00','12:12:00','01.04.06 17:04:00',0);
INSERT INTO TST_ONE_TO_SET
  (ID,NAME,INTEGERFIELD,STRINGFIELD,DOUBLEFIELD,DATEFIELD,TIMEFIELD,TIMESTAMPFIELD,RESERVED)
VALUES
  (301,'Name 301',12345356,'RERER',345.658,'04.05.01','04:05:56','07.03.06 03:09:00',1);
INSERT INTO TST_ONE_TO_SET
  (ID,NAME,INTEGERFIELD,STRINGFIELD,DOUBLEFIELD,DATEFIELD,TIMEFIELD,TIMESTAMPFIELD,RESERVED)
VALUES
  (302,'Name 302',678,'jkhjkhjkh',123.675687,'07.12.02','04:25:00','08.02.02 23:00:00',0);
INSERT INTO TST_ONE_TO_SET
  (ID,NAME,INTEGERFIELD,STRINGFIELD,DOUBLEFIELD,DATEFIELD,TIMEFIELD,TIMESTAMPFIELD,RESERVED)
VALUES
  (303,'Name 303',7696,'NHHH',978.123,'23.01.99','07:00:00','23.04.00',1);
INSERT INTO TST_ONE_TO_SET
  (ID,NAME,INTEGERFIELD,STRINGFIELD,DOUBLEFIELD,DATEFIELD,TIMEFIELD,TIMESTAMPFIELD,RESERVED)
VALUES
  (304,'Name 304',-3456,'EEE',0.23456,'09.01.03','23:44:00','23.07.01 18:15:00',1);



INSERT INTO TST_MAINTABLE
  (ID,NAME,ONETOSETKEY,INTEGERFIELD,STRINGFIELD,DOUBLEFIELD,DATEFIELD,TIMEFIELD,TIMESTAMPFIELD,RESERVED)
VALUES
  (100,'Name 100',304,123,'JHGHJG',1.35,'12.12.00','12:12:00','01.04.06 17:04:00',0);
INSERT INTO TST_MAINTABLE
  (ID,NAME,ONETOSETKEY,INTEGERFIELD,STRINGFIELD,DOUBLEFIELD,DATEFIELD,TIMEFIELD,TIMESTAMPFIELD,RESERVED)
VALUES
  (101,'Name 101',NULL,12345356,'RERER',345.658,'04.05.01','04:05:56','07.03.06 03:09:00',1);
INSERT INTO TST_MAINTABLE
  (ID,NAME,ONETOSETKEY,INTEGERFIELD,STRINGFIELD,DOUBLEFIELD,DATEFIELD,TIMEFIELD,TIMESTAMPFIELD,RESERVED)
VALUES
  (102,'Name 102',303,678,'jkhjkhjkh',123.675687,'07.12.02','04:25:00','08.02.02 23:00:00',0);
INSERT INTO TST_MAINTABLE
  (ID,NAME,ONETOSETKEY,INTEGERFIELD,STRINGFIELD,DOUBLEFIELD,DATEFIELD,TIMEFIELD,TIMESTAMPFIELD,RESERVED)
VALUES
  (103,'Name 103',303,7696,'NHHH',978.123,'23.01.99','07:00:00','23.04.00',1);
INSERT INTO TST_MAINTABLE
  (ID,NAME,ONETOSETKEY,INTEGERFIELD,STRINGFIELD,DOUBLEFIELD,DATEFIELD,TIMEFIELD,TIMESTAMPFIELD,RESERVED)
VALUES
  (104,'Name 104',302,-3456,'EEE',0.23456,'09.01.03','23:44:00','23.07.01 18:15:00',1);



INSERT INTO TST_SET_TO_ONE
  (ID,MAINTABLEKEY,NAME,INTEGERFIELD,STRINGFIELD,DOUBLEFIELD,DATEFIELD,TIMEFIELD,TIMESTAMPFIELD,RESERVED)
VALUES
  (200,101,'Name 200',123,'JHGHJG',1.35,'12.12.00','12:12:00','01.04.06 17:04:00',0);
INSERT INTO TST_SET_TO_ONE
  (ID,MAINTABLEKEY,NAME,INTEGERFIELD,STRINGFIELD,DOUBLEFIELD,DATEFIELD,TIMEFIELD,TIMESTAMPFIELD,RESERVED)
VALUES
  (201,NULL,'Name 201',12345356,'RERER',345.658,'04.05.01','04:05:56','07.03.06 03:09:00',1);
INSERT INTO TST_SET_TO_ONE
  (ID,MAINTABLEKEY,NAME,INTEGERFIELD,STRINGFIELD,DOUBLEFIELD,DATEFIELD,TIMEFIELD,TIMESTAMPFIELD,RESERVED)
VALUES
  (202,101,'Name 202',678,'jkhjkhjkh',123.675687,'07.12.02','04:25:00','08.02.02 23:00:00',0);
INSERT INTO TST_SET_TO_ONE
  (ID,MAINTABLEKEY,NAME,INTEGERFIELD,STRINGFIELD,DOUBLEFIELD,DATEFIELD,TIMEFIELD,TIMESTAMPFIELD,RESERVED)
VALUES
  (203,100,'Name 203',7696,'NHHH',978.123,'23.01.99','07:00:00','23.04.00',1);
INSERT INTO TST_SET_TO_ONE
  (ID,MAINTABLEKEY,NAME,INTEGERFIELD,STRINGFIELD,DOUBLEFIELD,DATEFIELD,TIMEFIELD,TIMESTAMPFIELD,RESERVED)
VALUES
  (204,104,'Name 204',-3456,'EEE',0.23456,'09.01.03','23:44:00','23.07.01 18:15:00',1);



INSERT INTO TST_SET_TO_SET
  (ID,NAME,INTEGERFIELD,STRINGFIELD,DOUBLEFIELD,DATEFIELD,TIMEFIELD,TIMESTAMPFIELD,RESERVED)
VALUES
  (400,'Name 400',12,'JHGHJG',1.35,'12.12.00','12:12:00','01.04.06 17:04:00',0);
INSERT INTO TST_SET_TO_SET
  (ID,NAME,INTEGERFIELD,STRINGFIELD,DOUBLEFIELD,DATEFIELD,TIMEFIELD,TIMESTAMPFIELD,RESERVED)
VALUES
  (401,'Name 401',12345356,'RERER',345.658,'04.05.01','04:05:56','07.03.06 03:09:00',1);
INSERT INTO TST_SET_TO_SET
  (ID,NAME,INTEGERFIELD,STRINGFIELD,DOUBLEFIELD,DATEFIELD,TIMEFIELD,TIMESTAMPFIELD,RESERVED)
VALUES
  (402,'Name 402',-234,'jkhjkhjkh',123.675687,'07.12.02','04:25:00','08.02.02 23:00:00',0);
INSERT INTO TST_SET_TO_SET
  (ID,NAME,INTEGERFIELD,STRINGFIELD,DOUBLEFIELD,DATEFIELD,TIMEFIELD,TIMESTAMPFIELD,RESERVED)
VALUES
  (403,'Name 403',4235245,'NHHH',978.123,'23.01.99','07:00:00','23.04.00',1);
INSERT INTO TST_SET_TO_SET
  (ID,NAME,INTEGERFIELD,STRINGFIELD,DOUBLEFIELD,DATEFIELD,TIMEFIELD,TIMESTAMPFIELD,RESERVED)
VALUES
  (404,'Name 404',4545,'EEE',0.23456,'09.01.03','23:44:00','23.07.01 18:15:00',1);



INSERT INTO TST_SETLINK
  (MAINTABLEKEY,SETTOSETKEY)
VALUES
  (104,400);
INSERT INTO TST_SETLINK
  (MAINTABLEKEY,SETTOSETKEY)
VALUES
  (103,401);
INSERT INTO TST_SETLINK
  (MAINTABLEKEY,SETTOSETKEY)
VALUES
  (104,401);
INSERT INTO TST_SETLINK
  (MAINTABLEKEY,SETTOSETKEY)
VALUES
  (100,403);
INSERT INTO TST_SETLINK
  (MAINTABLEKEY,SETTOSETKEY)
VALUES
  (100,401);
INSERT INTO TST_SETLINK
  (MAINTABLEKEY,SETTOSETKEY)
VALUES
  (101,404);



COMMIT;
